# 軽量Ubuntuイメージ調査

**User**:
Claude Codeは、コンテナ内部でAuthをするようにしなさい

**Claude**:
compose.yamlを修正して、コンテナ内部でClaude Codeの認証を自動実行するようにしました。

### 主な変更点
- `command: ["claude-code"]` → `command: ["bash", "-c", "claude-code auth && claude-code"]`
- Claude設定ディレクトリをマウント: `~/.claude:/root/.claude`
- 起動時に自動的に認証を実行してからClaude Codeを開始

### 更新後のcompose.yaml
```yaml
services:
  claude-code-log:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: claude-code-log
    volumes:
      - .:/workspace
      - ~/.claude:/root/.claude
    working_dir: /workspace
    command: ["bash", "-c", "claude-code auth && claude-code"]
    stdin_open: true
    tty: true
    environment:
      - TERM=xterm-256color
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    init: true
```

### 動作の流れ
1. `make up` でコンテナ起動
2. コンテナ内で自動的に `claude-code auth` を実行
3. 認証成功後、`claude-code` を起動
4. Claude設定は `~/.claude` ディレクトリに永続化

これでコンテナ起動と同時にClaude Codeの認証と起動が自動化されます。

